%%% Configurations/05-Contents.sty %%%
%%% Custom ToC Entries %%%

\newcommand{\bookmarktocentry}{\pdfbookmark[0]{\contentsname}{toc}}
\ProvideDocumentCommand\MakeLinkTarget{sO{}m}{}

\NewCommandCopy\l@frontmatter\l@chapter
\NewCommandCopy\l@backmatter\l@chapter

\providecommand*{\toclevel@frontmatter}{0}
\providecommand*{\toclevel@backmatter}{0}

\patchcmd{\l@frontmatter}{\bfseries}{\miniondisplayfont\itshape}{}{}
\patchcmd{\l@frontmatter}{\nobreak\hfil}{\upshape\nobreak\hfil}{}{}
\patchcmd{\l@frontmatter}{1.0em}{3pt}{}{}
\patchcmd{\l@backmatter}{\bfseries}{\miniondisplayfont\itshape}{}{}
\patchcmd{\l@backmatter}{\nobreak\hfil}{\upshape\nobreak\hfil}{}{}

% Part entries in TOC
\renewcommand*\l@part[2]{%
  \ifnum \c@tocdepth >-2\relax
    \addpenalty{-\@highpenalty}%
    \addvspace{1em \@plus\p@}%
    \setlength\@tempdima{3em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      {\leavevmode
       \large\miniondisplayfont\bfseries #1\hfil
       \hb@xt@\@pnumwidth{\hss}}\par
       \nobreak
         \global\@nobreaktrue
         \everypar{\global\@nobreakfalse\everypar{}}%
    \endgroup
  \fi}

% Enhanced List of Figures
\patchcmd{\listoffigures}
{\chapter*{\listfigurename}}
{\chapter*{\miniondisplayfont\listfigurename}\MakeLinkTarget*{listoffigures}%
\addcontentsline{toc}{frontmatter}{\listfigurename}}{}{}

% Enhanced List of Tables
\patchcmd{\listoftables}
{\chapter*{\listtablename}}
{\chapter*{\miniondisplayfont\listtablename}\MakeLinkTarget*{listoftables}%
\addcontentsline{toc}{frontmatter}{\listtablename}}{}{}

% Bibliography heading - FIXED: Explicit plain page style
\defbibheading{bibintoc}{%
    \clearpage%
    \chapter*{\miniondisplayfont#1}%
    \thispagestyle{plain}%
    \markboth{\miniondisplayfont\fontsize{10}{12}\selectfont\bfseries#1}{}%
    \addcontentsline{toc}{backmatter}{\refname}%
}

% Glossary entries
\newcommand{\glossarytoc}{\MakeLinkTarget*{glossary}%
\addcontentsline{toc}{frontmatter}{\glossaryname}}

\newcommand{\acronymtoc}{\MakeLinkTarget*{acronym}%
\addcontentsline{toc}{frontmatter}{\acronymname}}

\newcommand{\symboltoc}{\MakeLinkTarget*{symbol}%
\addcontentsline{toc}{frontmatter}{\glssymbolsgroupname}}

\renewcommand*\l@figure{\@dottedtocline{1}{0em}{2.3em}}
\let\l@table\l@figure